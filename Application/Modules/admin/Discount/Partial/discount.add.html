<section class="dashboard-counts no-padding-bottom">
  <div class="container-fluid">
    <div class="card">
      <div class="card-header d-flex align-items-center">
        <div class="w-100">
          <h5 class="pull-right">
            {{currentState.label}}
          </h5>
          <span class="pull-left">
            <i class="fa fa-arrow-left custom-pointer" tooltip-append-to-body="true" uib-tooltip="بازگشت" ui-sref="dashboard.discount.list"></i>
          </span>
          <!--                    <span class="badge pull-left" ng-class="{'badge-warning' : self.shop.shopStatus == 0 , 'badge-success' : self.shop.shopStatus == 1 ,  'badge-danger' : self.shop.shopStatus == 2  }">-->
          <!--                        {{self.shop.shopStatus | shopStatusFilter}}-->
          <!--                    </span>-->
        </div>
      </div>
      <div class="card-body">
        <form id="addForm" name="addForm">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">

                <label class="form-control-label" for="title">
                  عنوان <small class="text-danger" ng-if="addForm.title.$error.required == true">*</small>
                </label>
                <input type="text" class="form-control" id="title" name="title" tabindex="1" ng-class="{'is-invalid' : addForm.title.$touched &&  addForm.title.$invalid == true}" ng-model="self.discount.title" ng-required="true">
                <div class="invalid-feedback">
                  <small ng-if="addForm.title.$touched && addForm.title.$error.required == true">
                    عنوان اجباری می باشد
                  </small>
                </div>

              </div>
            </div>

            <div class="col-md-3">
              <div class="form-group">
                <label class="form-control-label" for="percent">
                  درصد تخفیف <small class="text-danger" ng-if="addForm.title.$error.required == true">*</small>
                </label>

                <div class="input-group mb-3">
                  <input type="text" ng-pattern="/^[+-]?\d+(\.\d+)?$/" class="form-control" id="percent" name="percent" tabindex="1" ng-class="{'is-invalid' : addForm.percent.$touched &&  addForm.percent.$invalid == true}" ng-model="self.discount.percent" ng-required="true">
                  <div class="input-group-prepend">
                    <span class="input-group-text">%</span>
                  </div>

                </div>

                <div class="invalid-feedback">
                  <small ng-if="addForm.percent.$touched && addForm.percent.$error.required == true">
                    درصد تخفیف اجباری می باشد
                  </small>
                </div>

              </div>
            </div>


            <div class="col-md-3">
              <div class="form-group">

                <label class="form-control-label" for="maxOrderCount">
                  حداکثر تعداد سفارش <small class="text-danger" ng-if="addForm.maxOrderCount.$error.required == true">*</small>
                </label>
                <input type="number" class="form-control" id="maxOrderCount" name="maxOrderCount" tabindex="1" ng-class="{'is-invalid' : addForm.maxOrderCount.$touched &&  addForm.maxOrderCount.$invalid == true}" ng-model="self.discount.maxOrderCount" ng-required="true">
                <div class="invalid-feedback">
                  <small ng-if="addForm.maxOrderCount.$touched && addForm.maxOrderCount.$error.required == true">
                    حداکثر تعداد سفارش اجباری می باشد
                  </small>
                </div>

              </div>
            </div>


            <div class="col-md-3">
              <div class="form-group">

                <label class="form-control-label" for="maxProductCount">
                  حداکثر تعداد محصولات <small class="text-danger" ng-if="addForm.maxProductCount.$error.required == true">*</small>
                </label>
                <input type="number" class="form-control" id="maxProductCount" name="maxProductCount" tabindex="1" ng-class="{'is-invalid' : addForm.maxProductCount.$touched &&  addForm.maxProductCount.$invalid == true}" ng-model="self.discount.maxProductCount" ng-required="true">
                <div class="invalid-feedback">
                  <small ng-if="addForm.maxProductCount.$touched && addForm.maxProductCount.$error.required == true">
                    حداکثر تعداد محصولات اجباری می باشد
                  </small>
                </div>

              </div>
            </div>

            <div class="col-md-3">
              <div class="form-group">
                <label class="form-control-label" for="fromDate">
                  تاریخ شروع <small class="text-danger" ng-if="addForm.fromDate.$error.required == true">*</small>
                </label>
                <adm-dtp class="direction-ltr" ng-model='self.discount.fromDate' name="fromDate" id="fromDate" full-data="date11_detail" ng-required="true" options='{calType: "jalali", format: "YYYY/MM/DD" , autoClose:"true" , "dtpType" : "date" , default: "today" , freezeInput: "true"}'></adm-dtp>

                <div class="invalid-feedback">
                  <small ng-if="addForm.fromDate.$touched && addForm.fromDate.$error.required == true">
                    تاریخ شروع اجباری می باشد
                  </small>
                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="form-group">
                <label class="form-control-label" for="birthDate">
                  تاریخ پایان <small class="text-danger" ng-if="addForm.toDate.$error.required == true">*</small>
                </label>
                <adm-dtp class="direction-ltr" ng-model='self.discount.fromDate' name="toDate" id="toDate" disable='true' full-data="date12_detail" ng-required="false" options='{calType: "jalali", format: "YYYY/MM/DD" , autoClose:"true" , "dtpType" : "date" , default: "today" , freezeInput: "true" , disabled:"true"}'></adm-dtp>

                <div class="invalid-feedback">
                  <small ng-if="addForm.toDate.$touched && addForm.toDate.$error.required == true">
                    تاریخ پایان اجباری می باشد
                  </small>
                </div>
              </div>
            </div>
            <style>
              .hours.has-error input {
                border: 1px solid red
              }

              .minutes.has-error input {
                border: 1px solid red
              }
            </style>
            <div class="col-md-3">
              <div class="form-group">
                <label class="form-control-label" for="fromTime">
                  زمان شروع <small class="text-danger" ng-if="addForm.fromTime.$error.required == true">*</small>
                </label>
                <div class="clearfix"></div>
                <div class="direction-ltr text-center" style="float:right">
                  <div uib-timepicker ng-required="true" id="fromTime" name="fromTime" ng-class="{'is-invalid' : addForm.fromTime.$touched &&  addForm.fromTime.$invalid == true}" show-spinners="false" ng-model="self.discount.fromDateTime" hour-step="1" minute-step="5" show-meridian="false"></div>
                </div>

                <div class="invalid-feedback">
                  <small ng-if="addForm.fromTime.$touched && addForm.fromTime.$error.required == true">
                    زمان شروع اجباری می باشد
                  </small>
                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="form-group">
                <label class="form-control-label" for="toTime">
                  زمان پایان <small class="text-danger" ng-if="addForm.toTime.$error.required == true">*</small>
                </label>
                <div class="clearfix"></div>
                <div class="direction-ltr text-center" style="float:right">
                  <div uib-timepicker  ng-required="true" id="toTime" name="toTime" min="self.discount.fromTime" ng-class="{'is-invalid' : addForm.toTime.$touched &&  addForm.toTime.$invalid == true}" show-spinners="false" ng-model="self.discount.toDateTime" hour-step="1" minute-step="5" show-meridian="false"></div>
                </div>
                <div class="clearfix"></div>
                <div class="text-danger">
                  <small ng-if="addForm.toTime.$touched && addForm.toTime.$error.required == true">
                    <div>
                      زمان پایان اجباری می باشد
                    </div>
                    <div>
                      زمان پایان باید بزرگتر از زمان شروع باشد
                    </div>

                  </small>


                </div>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">

                <label class="form-control-label" for="description">
                  توضیحات
                </label>
                <textarea class="form-control" ng-model="self.discount.description">

</textarea>

              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">

                <button class="btn btn-success" ng-click="self.addDiscount()" ng-disabled="addForm.$invalid">
                  ذخیره
                </button>
              </div>
            </div>
          </div>
        </form>
        <br />
      </div>
    </div>
  </div>
</section>